/**
 * The Rsync.execute method is usable with the Q library to create a Promise
 * based version of the execute method.
 */

var Q = require('q');
var Rsync = require('../rsync');

// The command can be build synchonous
var cmd = new Rsync()
    .flags('avz')
    .shell('ssh')
    .source('/path/to/source')
    .destination('you@server:/destination/path');

// Create a Promise for the asynchronous execute method using Q.ninvoke
var promise = Q.ninvoke(cmd, 'execute');

// The promise can now be used to capture the output or the error in separate methods
Q.when(promise, function(code) {
    console.log('Command executed without errors, code: ' + code);
}, function(error) {
    console.log('Something went wrong: ' + error.message);
});
